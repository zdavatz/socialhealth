<template name="socialHealth">
    <section class="section">
        <div class="container">
            <div class="columns is-multiline">
                <div class="column is-12">
                    <span class="title">Social Health Search</span>

                    <span class="is-pulled-right">  
                        Searches: <span class="tag is-primary5">{{setting 'stats' 'items'}}</span>
                        Profiles: <span class="tag is-info">{{setting 'stats' 'profiles'}}</span>
                </span>
                </div>
                <div class="column is-10">
                    <form class="field has-addons" id="search">
                        <p class="control">
                            <label class="label">Name</label>
                            <input id="name" class="input" type="text" placeholder="Name">
                        </p>
                        <p class="control is-expanded">
                            <label class="label">Surname</label>
                            <input id="surname" class="input" type="text" placeholder="Surname">
                        </p>
                        <p class="control is-expanded">
                            <label class="label">Keyword</label>
                            <input id="keywords" class="input" type="text" placeholder="Keyword: seperated by comma">
                        </p>
                        <p class="control">
                            <label class="label">&nbsp;</label>
                            <button type="submit" class="button search">
                                Search
                            </button>
                        </p>
                    </form>
                </div>
                <!--  -->
                <div class="column is-12">
                    <p class="control">
                        <label class="checkbox">
                            <input type="checkbox" id="isAPI" name="isAPI" val="isAPI:true">
                            USE API
                        </label>
                    </p>
                </div>
            </div>
            <hr />
            <div class="columns is-multiline">
                <div class="column is-6">
                    <div class="column is-12" style="height: 80px;">
                        <br /><br />
                    </div>
                    <h3 class="subtitle is-4">Results</h3>
                    <hr />
                    {{#if results}}
                    {{#each results}}
                    <p>
                        {{keyword}} <br />
                        <a href="{{link}}" target="_blank">{{title}}</a> <br />
                        <small>{{link}}</small>
                    </p>
                    <br />
                    {{/each}}
                    {{else}}
                    <p>There is no results</p>
                    {{/if}}
                </div>
                <div class="column is-6">
                    <div class="column is-12" style="height: 80px;">
                        <a href="#" class="button setSettings" data-settings="history:true">History</a>
                        <a href="#" class="button setSettings" data-settings="history:false">Console</a>
                     
                    </div>
                    {{#if getSetting 'history'}}
                    <h3 class="subtitle is-4">History</h3>
                    <hr />
                    <!--  -->
                    {{#if history}}



                    {{#each items}}
                    <p class="notification {{#if isAPI}} is-danger {{/if}}">
                        {{count}}
                        <strong><span class="{{#if isAPI}} has-text-white {{/if}}">{{fullname}}</span></strong > 
                            {{#if keywords}}<span class="tag is-primary">{{keywords}}</span> {{/if}} <br/>
                        <small>{{ moFormat this.createAt 'dddd, MMMM Do YYYY, h:mm:ss a'}}</small>
                        <br>

                        {{> resultsData id=_id}}
                    </p>
   
                 
                    {{/each}}


                    <ul class="is-hidden">
                        {{#each history}}
                        <ol class="notification is-light">
                            <!-- {{@index}} -->
                            {{count}}
                            <strong><span class="{{#if isAPI}} has-text-danger {{/if}}">{{fullname}}</span></strong > 
                                {{#if keywords}}<span class="tag is-primary">{{keywords}}</span> {{/if}} <br/>
                            <small>{{ moFormat this.createAt 'dddd, MMMM Do YYYY, h:mm:ss a'}}</small>
                
                            <!-- <p></p> -->
                            <br/><br/>
                            {{#each this.results}}
                            <p class="">
                                <a href="{{link}}" target="_blank">{{title}}</a> <br />
                                <small>{{link}}</small>
                            </p>
                            {{/each}}
                        </ol>
                        {{/each}}
                    </ul>
                    {{else}}
                    <p class="">
                        No search history
                    </p>
                    {{/if}}
                    {{else}}
                    <h3 class="subtitle is-4">Console</h3>
                    <hr />
                    <pre>
                        {{resultsJSON}}
                    </pre>
                    {{/if}}
                    <!-- <textarea class="textarea" rows="20"> -->
                    <!-- </textarea> -->
                </div>
            </div>
        </div>
    </section>
</template>


<template name="resultsData">
    <!-- {{this.id}} -->
    <!-- {{resultsList}} -->
    <br/>
    {{#each resultsList}}
    <p class="">
        <a href="{{link}}" target="_blank">{{title}}</a> <br />
        <small>{{link}}</small>
    </p>
    {{/each}}

</template>